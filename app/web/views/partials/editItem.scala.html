<div ui-modal ng-model="showConfirmDestroyModal" id="myModal" style="padding- 20px">
    <h2>Delete Item</h2>
    <br/>

    <p>Are you sure? This can't be undone.</p>

    <button ng-click="destroyConfirmed()" class="btn btn-danger">Yes</button>
    <button class="btn btn-info" ng-click="showConfirmDestroyModal=false">No</button>
</div>


<div class="sub-nav">
    <div class="container" style="width: 940px;">
        <div class="row">

            <ul class="span5 nav nav-pills">
                <li ng-class="{true:'active', false:''}[currentPanel=='content']">
                    <a
                            href="javascript:void(1)"
                            ng-click="changePanel('content')">Item Design</a>
                </li>
                <li ng-class="{true:'active', false:''}[currentPanel=='metadata']">
                    <a
                            href="javascript:void(1)"
                            ng-click="changePanel('metadata')">Item Profile</a></li>

                <li ng-class="{true:'active', false:''}[currentPanel=='supportingMaterials']">
                    <a href="javascript:void(1)"
                       ng-click="changePanel('supportingMaterials')">Supporting Materials</a>
                </li>
            </ul>

            <span class="pull-right">


                <button class="btn btn-primary"
                        ng-model="isSaving"
                        loading-button
                        data-loading-text="Saving..."
                        ng-click="save()">Save
                </button>

            <i id="togglePreviewButton" class="icon-preview" ng-class="previewClassName"
               style="cursor: pointer"
               ng-click="togglePreview()"
               title="toggle preview"
               ng-show="mode == 'edit'"></i>

            <i id="toggleFileListButton" class="icon-file icon-white" ng-class="fileListClassName"
               style="cursor: pointer"
               ng-click="toggleFileList()"
               title="toggle file list"
               ng-show="mode == 'edit'"></i>
            </span>
        </div>
    </div>
</div>


<div class="item-content-container">
    <div class="edit" style="overflow: auto" ng-class="previewClassName">

        @_edit.metadata()

        @_edit.supportingMaterials()

        <!--_edit.content()
        ng-show="currentPanel == 'content'"
        -->

        <div class="resource-editor editor-panel" ng-show="showResourceEditor" ng-controller="ResourceEditor">

            <div ui-modal ng-model="showRenameFileModal" style="padding: 10px">
                <h3>Rename File</h3>

                <div class="control-group">
                    <label class="control-label">Name</label>
                    <input type="text" ng-model="newFilename" placeholder="enter name.." ng-change="nameAlreadyTaken = false"/>
                    <br/>
                    <span style="font-weight: 8px; color: red;" ng-show="nameAlreadyTaken">Name already taken</span>
                </div>
                <button ng-click="confirmRenameFile()"
                        ng-disabled="!canRenameFile()"
                        class="btn btn-success">Go
                </button>
                <button class="btn btn-info"
                        ng-click="cancelRenameFile()">Cancel
                </button>
            </div>

            <div class="resource-editor-header" ng-show="showBackNav">
                <h4><a ng-click="leaveEditor()" class="leave-link"><i class="icon-backward"></i></a> Editing:
                    {{resource.name}}</h4>
            </div>

            <div class="file-list">
                <h2>Files</h2>

                <span class="info" ng-show="resource.files.length == 0">No files yet!</span>

                <ul>
                    <li ng-class="{true:'active', false:''}[f == selectedFile]" ng-repeat="f in resource.files">
                        <i class="icon-home" ng-show="f.default"></i>
                        <a ng-click="showFile(f)">{{f.name}}</a>

                            <span class="dropdown">
                                <a class="dropdown-toggle" id="drop5" role="button" data-toggle="dropdown" href="#"><b
                                        class="caret"></b></a>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a tabindex="-1" ng-click="removeFile(f)">Remove</a></li>
                                    <li><a tabindex="-1" ng-click="renameFile(f)">Rename</a></li>
                                    <li><a tabindex="-1" ng-click="makeDefault(f)">Make Default</a></li>
                                </ul>
                            </span>
                    </li>
                </ul>

                <div class="btn-toolbar">
                    <div class="btn-group">
                        <button
                                file-uploader
                                fu-upload-completed="onFileUploadCompleted"
                                class="btn btn-mini btn-success"
                                fu-url="calculateUploadUrl()"
                                fu-max-size="400"
                                fu-mode="raw">Upload File
                        </button>
                        <button
                                class="btn btn-mini btn-success dropdown-toggle"
                                data-toggle="dropdown">New...<span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a ng-click="createNewVirtualFile('*.html')">html</a></li>
                            <li><a ng-click="createNewVirtualFile('*.css')">css</a></li>
                            <li><a ng-click="createNewVirtualFile('*.xml')">xml</a></li>
                            <li><a ng-click="createNewVirtualFile('*.js')">js</a></li>
                        </ul>
                    </div>

                </div>

            </div>

            <div style="overflow:hidden;">

                <img ng-show="!selectedFile.content" ng:src="{{selectedFileImageUrl}}"/>

                <div class="code-editor"
                     ace-editor
                     ng-show="showEditor"
                     ace-model="selectedFile.content"
                     ace-theme="eclipse"
                     ace-mode="selectedFile.contentType"
                     ng-class="fileListClassName"
                     ace-resize-events="tabSelected,panelOpen,dataLoaded"
                        ></div>
            </div>

        </div>


    </div>

    <div class="preview" ng-class="previewClassName">
        <div class="inner">
            <a href="/testplayer/item/{{itemData._id.$oid}}" target="_blank">test player preview</a>

            <div class="preview-container">
                <div ng-bind-html-unsafe="processedXmlData">
                </div>
            </div>
        </div>
    </div>
</div>
