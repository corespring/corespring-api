@(templates: List[models.web.QtiTemplate], dbServer : String, dbName : String, username:String, jsonString:String)

@htmlSafe(s:String) = @{
    var out = s.replace("\\", "\\\\")
    out = out.replace("\n", "\\n")
    out = out.replace("\"", "\\\"")
    Html(out)
}


<!DOCTYPE html>
<html lang="en" ng-app="tagger" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>@dbName | Corespring Content Tagger</title>
    <!--
    @dbServer
    @dbName
    -->
    <meta name="description" content="CoreSpring Content Tagger"/>

    <link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400,500,700' rel='stylesheet' type='text/css'>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/assets/js/vendor/underscore/1.3.3/underscore-min.js" type="text/javascript"></script>

    <!-- select2 component -->
    <script src="/assets/js/vendor/select2/select2.js" type="text/javascript"></script>
    <link href="/assets/js/vendor/select2/select2.css" rel="stylesheet" type="text/css"/>
    <!--
    TODO: Use Bootstrap.less: https://github.com/playframework/Play20/wiki/Tips
    Once we move to Play 2.1
    -->
    <!-- bootstrap -->
    <link href="/assets/bootstrap/css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href="/assets/bootstrap/css/bootstrap.css" rel="stylesheet"/>
    <script type="text/javascript" src="/assets/bootstrap/js/bootstrap.js"></script>
    <!-- a fork of the bootstrap typeahead plugin -->
    <script type="text/javascript" src="/assets/bootstrap/js/TypeAheadFork.js"></script>

    <link href="/assets/stylesheets/app.css" rel="stylesheet"/>

    <script src="/assets/js/vendor/angular/1.0.1/angular-1.0.1.js"></script>
    <script src="/assets/js/vendor/angular/1.0.1/angular-resource-1.0.1.js"></script>
    <script src="/assets/js/vendor/angular-bootstrap-ui/angular-bootstrap-ui.js"></script>
    <script src="/assets/js/vendor/angular-ui/fork-test/angular-ui.js"></script>

    <script src="/assets/js/corespring/tagger/select2/Select2Adapter.js"></script>
    <script src="/assets/js/corespring/tagger/utils/ArrayUtils.js" type="text/javascript"></script>
    <script src="/assets/js/corespring/tagger/mongo/MongoQuery.js"></script>

    <script src="/assets/js/corespring/tagger/app.js"></script>
    <script src="/assets/js/corespring/tagger/services.js"></script>

    <script src="/assets/js/corespring/tagger/controllers/EditController.js"></script>
    <script src="/assets/js/corespring/tagger/controllers/CreateController.js"></script>
    <script src="/assets/js/corespring/tagger/controllers/CollectionsController.js"></script>
    <script src="/assets/js/corespring/tagger/controllers/ItemCollectionController.js"></script>

    <script src="/assets/js/corespring/tagger/filters.js"></script>
    <script src="/assets/js/corespring/tagger/directives.js"></script>

    <script type="text/javascript" src="/assets/js/vendor/ace/ace.js"></script>
    <script type="text/javascript" src="/assets/js/vendor/ace/theme-eclipse.js"></script>
    <script type="text/javascript" src="/assets/js/vendor/ace/mode-xml.js"></script>

    <script src="/assets/js/vendor/corespring-ng-components/corespring-ng-components.js" type="text/javascript" ></script>

    <script type="text/javascript">

        window.fieldValues = @Html(jsonString);

        //init the bootstrap dropdowns - TODO: make this a directive?
        $('.dropdown-toggle').dropdown();

        /**
         * Templates Service - provides some xml templates for common types.
         */
        var templatesService = angular.module('templates', []);

        templatesService.factory('NewItemTemplates', function () {
            var data = {};

            data["blank"] = {
                label: "blank",
                xmlData: ""
            }

            @templates.map{ template =>
             data["@template.code"] = {
                label: "@template.label",
                xmlData: "@htmlSafe(template.xmlData)"
             }
            }
            return data;
        });

    </script>

</head>
<body>
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="/"> <img src="/assets/images/cs-white-logo-11px.png" alt="Corespring Content Tagger"/></a>
            <span class="pull-right" style="padding-left: 10px; padding-top: 10px;">hi @username&nbsp;
            <a class="logout-icon" title="logout" href="/logout"><i class="icon-share icon-white"></i></a>
            </span>


            <ul id="resultPager" class="nav pull-right" results-pager ng-show="pagerText">
                <li>
                    <div class="pager">
                        <div class="muted pager-text">{{pagerText}}</div>
                        <div class="progress progress-success progress-striped
                             active pager-progress-bar" network-progress ng-show="isLoading">
                            <div class="bar"></div>
                        </div>
                    </div>
                </li>
                <li>
                    <a class="cs-icon-link" style="float:left;" ng-click="previous()" ng-show="editViewOpen"><i class="icon-white icon-arrow-left"></i></a>
                    <a class="cs-icon-link" style="float:left;" ng-click="next()" ng-show="editViewOpen"><i class="icon-white icon-arrow-right"></i></a>
                </li>
            </ul>

                </div>
    </div>
</div>
    <div ng-view class=""></div>
</body>
</html>
